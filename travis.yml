notifications:
  email:
    recipients:
      - tullerVal@gmail.com
    on_success: always
    on_failure: always	

before_install:
- sudo systemsetup -settimezone Europe/Zaporozhye
- mkdir ./coverage
- cd .bin/
- ./copyLibs.sh
- cd ..


language: objective-c


script:
- if xcodebuild build -project cocoa/PubNubMacOSTestApplication/PubNubMacOSTestApplication.xcodeproj > ./coverage/log_MacFail.txt; then echo "success"; mv ./coverage/log_MacFail.txt ./coverage/log_MacSuccess.txt; else echo "fail"; fi

- if xcodebuild build -project iOS/iPadDemoApp/pubnub.xcodeproj -sdk iphonesimulator ARCHS=i386 ONLY_ACTIVE_ARCH=YES VALID_ARCHS=i386 > ./coverage/log_iOSFail.txt; then echo "success"; mv ./coverage/log_iOSFail.txt ./coverage/log_iOSSuccess.txt; else echo "fail"; fi

- if xcodebuild build -project iOS/iPadDemoApp/pubnubForFail.xcodeproj > ./coverage/log_iOSForFailFail.txt; then echo "success"; mv ./coverage/log_iOSForFailFail.txt ./coverage/log_iOSForFailSuccess.txt; else echo "fail"; fi

# - if xcodebuild test -project iOS/tests/iOSUnitTests/pubnub.xcodeproj -scheme unitTest -sdk iphonesimulator ONLY_ACTIVE_ARCH=YES -configuration Debug > ./coverage/log_Test_unitTestFail.txt; then echo "success"; mv ./coverage/log_Test_unitTestFail.txt ./coverage/log_Test_unitTestSuccess.txt; else echo "fail"; fi

# - if xcodebuild test -project iOS/tests/iOSUnitTests/pubnub.xcodeproj -scheme travis-ci -sdk iphonesimulator ONLY_ACTIVE_ARCH=YES -configuration Debug > ./coverage/log_Test_iOSFail.txt; then echo "success"; mv ./coverage/log_Test_iOSFail.txt ./coverage/log_Test_iOSSuccess.txt; else echo "fail"; fi

after_failure:
- echo "fail" > ./coverage/fail.txt

after_success:
- rm ./coverage/fail.txt

after_script:
- ./update-gh-pages.sh

